(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[16],{127:function(e,t,a){},144:function(e,t,a){},406:function(e,t,a){"use strict";a.r(t);var n=a(19),c=a(6),s=a(11),r=a(7),l=a(1),i=a(43),o=a(138),d=a.n(o),j=a(139),m=a.n(j),u=a(124),b=a(229),h=a(213),O=a(125),p=a(126),f=a(121),x=a(51),g=a(49),v=a(5),y=a(165),k=a(50),N=a.n(k),C=(a(140),a(144),a(127),a(123)),w=a(52),F=a(10),S=function(e){var t=e.rowsPerPage,a=e.handlePerPage,n=e.searchValue,c=e.handleFilter,s=e.formModal,r=e.setFormModal;return Object(F.jsx)("div",{className:"invoice-list-table-header w-100 me-1 ms-50 mt-2 mb-75",children:Object(F.jsxs)(i.J,{children:[Object(F.jsx)(i.o,{xl:"6",className:"d-flex align-items-center p-0",children:Object(F.jsxs)("div",{className:"d-flex align-items-center w-100",children:[Object(F.jsx)("label",{htmlFor:"rows-per-page",children:"Show"}),Object(F.jsxs)(i.v,{className:"mx-50",type:"select",id:"rows-per-page",value:t,onChange:a,style:{width:"5rem"},children:[Object(F.jsx)("option",{value:"10",children:"10"}),Object(F.jsx)("option",{value:"25",children:"25"}),Object(F.jsx)("option",{value:"50",children:"50"})]}),Object(F.jsx)("label",{htmlFor:"rows-per-page",children:"Entries"})]})}),Object(F.jsxs)(i.o,{xl:"6",className:"d-flex align-items-sm-center justify-content-xl-end justify-content-start flex-xl-nowrap flex-wrap flex-sm-row flex-column pe-xl-1 p-0 mt-xl-0 mt-1",children:[Object(F.jsxs)("div",{className:"d-flex align-items-center mb-sm-0 mb-1 me-1",children:[Object(F.jsx)("label",{className:"mb-0",htmlFor:"search-list",children:"Search:"}),Object(F.jsx)(i.v,{id:"search-list",className:"ms-50 w-100",type:"text",value:n,onChange:c})]}),Object(F.jsx)(i.f.Ripple,{color:"primary",outline:!0,onClick:function(){return r(!s)},children:"New"})]})]})})};t.default=function(){var e=Object(g.b)(),t=Object(g.c)((function(e){return e.auth})),a=Object(l.useState)(0),o=Object(r.a)(a,2),j=o[0],k=o[1],P=Object(l.useState)(10),T=Object(r.a)(P,2),L=T[0],D=T[1],B=Object(l.useState)(""),M=Object(r.a)(B,2),J=M[0],z=M[1],E=Object(l.useState)(!1),V=Object(r.a)(E,2),q=V[0],A=V[1],H=Object(l.useState)(""),W=Object(r.a)(H,2),I=W[0],R=W[1],K=Object(l.useState)(""),U=Object(r.a)(K,2),Y=U[0],G=U[1],Q=Object(l.useState)(!1),X=Object(r.a)(Q,2),Z=X[0],$=X[1],_=Object(l.useState)(!1),ee=Object(r.a)(_,2),te=ee[0],ae=ee[1],ne=Object(l.useState)([]),ce=Object(r.a)(ne,2),se=ce[0],re=ce[1],le=Object(l.useState)([]),ie=Object(r.a)(le,2),oe=ie[0],de=ie[1],je=Object(l.useState)([]),me=Object(r.a)(je,2),ue=me[0],be=me[1],he=Object(l.useState)([]),Oe=Object(r.a)(he,2),pe=Oe[0],fe=Oe[1],xe=Object(v.l)(),ge=O.e().shape({jid:O.g().required(),type:O.g().required(),command:O.a()}),ve=Object(u.f)({mode:"onChange",resolver:Object(p.a)(ge),defaultValues:{jid:"",type:"",command:[]}}),ye=ve.control,ke=ve.formState.errors,Ne=ve.handleSubmit,Ce=ve.reset,we=ve.setValue,Fe=f.a.create();Fe.interceptors.request.use(function(){var a=Object(s.a)(Object(c.a)().mark((function a(n){var s,r,l;return Object(c.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!(1e3*(null===t||void 0===t||null===(s=t.user)||void 0===s?void 0:s.exp)<Date.now()||""===t.accessToken)&&t.accessToken){a.next=11;break}return a.next=4,f.a.get(C.b.token);case 4:r=a.sent,n.headers.Authorization="Bearer ".concat(r.data.accessToken),l=Object(x.a)(r.data.accessToken),e(Object(w.b)(r.data.accessToken)),e(Object(w.c)(l)),a.next=12;break;case 11:n.headers.Authorization="Bearer ".concat(t.accessToken);case 12:a.next=16;break;case 14:a.prev=14,a.t0=a.catch(0);case 16:return a.prev=16,a.abrupt("return",n);case 19:case"end":return a.stop()}}),a,null,[[0,14,16,19]])})));return function(e){return a.apply(this,arguments)}}(),(function(e){return Promise.reject(e)}));var Se=function(){Fe.get("".concat(C.a,"/user/filtercommand")).then((function(e){de(e.data.data),be(e.data.data.slice(0,L)),re(e.data.commandList.map((function(e){return{value:e,label:e}})))})).catch((function(){}))};Object(l.useEffect)((function(){var a;""===t.accessToken||!t.accessToken||1e3*(null===(a=t.user)||void 0===a?void 0:a.exp)<Date.now()?f.a.get(C.b.token).then((function(t){var a=t.data,n=Object(x.a)(a.accessToken);e(Object(w.b)(a.accessToken)),e(Object(w.c)(n)),Se()})).catch((function(e){console.log(e),xe("/auth/login")})):Se()}),[]);var Pe=[{sortable:!0,name:"Jid",sortField:"jid",selector:function(e){return e.jid},cell:function(e){return Object(F.jsx)("span",{className:"text-nowrap",style:{cursor:"pointer"},onClick:function(){we("jid",e.jid),we("type",e.type),G(e.type),we("command",e.command.map((function(e){return{value:e,label:e}}))),$(!Z)},children:e.jid})}},{sortable:!0,name:"Type",sortField:"type",maxWidth:"150px",selector:function(e){return e.type}},{sortable:!0,name:"Command",sortField:"command",selector:function(e){return e.command},cell:function(e){return Object(F.jsx)(F.Fragment,{children:e.command.join(" ")})}},{name:"",maxWidth:"150px",cell:function(e){return Object(F.jsx)("div",{children:Object(F.jsxs)(i.e,{href:"#",color:"danger",pill:!0,className:"w-100",onClick:function(t){t.preventDefault(),R(e.jid),A(!q)},children:[Object(F.jsx)(b.a,{size:14,className:"me-50"}),Object(F.jsx)("span",{className:"align-middle",children:"Delete"})]})})}}];return Object(F.jsx)("div",{children:Object(F.jsx)("div",{className:"app-user-list",children:Object(F.jsxs)(l.Fragment,{children:[Object(F.jsx)(i.h,{className:"overflow-hidden",children:Object(F.jsx)("div",{className:"react-dataTable",children:Object(F.jsx)(m.a,{noHeader:!0,subHeader:!0,pagination:!0,responsive:!0,paginationServer:!0,columns:Pe,paginationPerPage:L,className:"react-dataTable",sortIcon:Object(F.jsx)(h.a,{}),paginationComponent:function(){return Object(F.jsx)(d.a,{previousLabel:"",nextLabel:"",forcePage:j,onPageChange:function(e){return function(e){k(e.selected),be(oe.slice(L*(e.selected+1)-L,L*(e.selected+1)))}(e)},pageCount:J.length?Math.ceil(pe.length/L):Math.ceil(oe.length/L),breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",nextLinkClassName:"page-link",pageLinkClassName:"page-link",breakLinkClassName:"page-link",previousLinkClassName:"page-link",nextClassName:"page-item next-item",previousClassName:"page-item prev-item",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pe-1 mt-1"})},paginationDefaultPage:j+1,data:J.length?pe:ue,subHeaderComponent:Object(F.jsx)(S,{rowsPerPage:L,handlePerPage:function(e){var t=parseInt(e.currentTarget.value);D(t),be(oe.slice(t*(j+1)-t,t*(j+1)))},searchValue:J,handleFilter:function(e){var t=e.target.value,a=[];z(t),t.length&&(a=oe.filter((function(e){var a=!!Object.entries(e).find((function(e){var a=Object(r.a)(e,2)[1];return"string"===typeof a&&a.toLowerCase().startsWith(t.toLowerCase())}));return a||null})),fe(a),z(t))},navigate:xe,formModal:Z,setFormModal:$})})})}),Object(F.jsxs)(i.B,{scrollable:!0,isOpen:Z,toggle:function(){$(!Z),Ce(),G("")},className:"modal-dialog-centered modal-lg",children:[Object(F.jsx)(i.E,{toggle:function(){$(!Z),Ce(),G("")},children:"Filter Command"}),Object(F.jsx)(i.C,{children:Object(F.jsxs)(i.t,{onSubmit:Ne((function(e){ae(!0),e.command=e.command.map((function(e){return e.value})),Fe.post("".concat(C.a,"/user/filtercommand"),e).then((function(e){ae(!1),$(!Z),Ce(),G("");var t=!1,a=oe.map((function(a){return a.jid===e.data.data.jid&&(a=e.data.data,t=!0),a}));t||a.push(e.data.data),de(a),be(a.slice(0,L)),N.a.success(e.data.message)})).catch((function(e){var t,a;ae(!1),N.a.error(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)}))})),id:"formFilterCommand",children:[Object(F.jsxs)("div",{className:"mb-1",children:[Object(F.jsxs)(i.y,{className:"form-label",for:"jid",children:["Jid",Object(F.jsx)("font",{color:"FF7F7F",children:"*"})]}),Object(F.jsx)(u.a,{id:"jid",name:"jid",control:ye,render:function(e){var t=e.field;return Object(F.jsx)(i.v,Object(n.a)(Object(n.a)({},t),{},{placeholder:"628xxxx@s.whatsapp.net",invalid:ke.jid&&!0}))}}),ke.jid&&Object(F.jsx)(i.u,{children:ke.jid.message}),Object(F.jsx)("small",{children:Object(F.jsx)("i",{children:"Berakhiran @s.whatsap.net atau @g.us"})})]}),Object(F.jsxs)(i.J,{children:[Object(F.jsxs)(i.y,{className:"form-label",for:"type",children:["Type",Object(F.jsx)("font",{color:"FF7F7F",children:"*"})]}),Object(F.jsx)(i.o,{sm:"6",children:Object(F.jsxs)("div",{className:"form-check mb-1",children:[Object(F.jsx)(i.y,{className:"form-check-label",for:"typeBan",children:"Ban"}),Object(F.jsx)(u.a,{id:"typeBan",name:"type",control:ye,render:function(e){var t=e.field;return Object(F.jsx)(i.v,Object(n.a)(Object(n.a)({},t),{},{value:"ban",type:"radio",checked:"ban"===Y,onChange:function(e){var a;null!==e&&void 0!==e&&null!==(a=e.target)&&void 0!==a&&a.checked&&G("ban"),t.onChange(e)}}))}})]})}),Object(F.jsx)(i.o,{sm:"6",children:Object(F.jsxs)("div",{className:"form-check mb-1",children:[Object(F.jsx)(i.y,{className:"form-check-label",for:"typeOnly",children:"Only"}),Object(F.jsx)(u.a,{id:"typeOnly",name:"type",control:ye,render:function(e){var t=e.field;return Object(F.jsx)(i.v,Object(n.a)(Object(n.a)({},t),{},{value:"only",type:"radio",checked:"only"===Y,onChange:function(e){var a;null!==e&&void 0!==e&&null!==(a=e.target)&&void 0!==a&&a.checked&&G("only"),t.onChange(e)}}))}})]})}),ke.type&&Object(F.jsx)(i.u,{children:ke.type.message})]}),Object(F.jsxs)("div",{className:"mb-1",children:[Object(F.jsxs)(i.y,{className:"form-label",for:"command",children:["Command",Object(F.jsx)("font",{color:"FF7F7F",children:"*"})]}),Object(F.jsx)(u.a,{id:"command",name:"command",control:ye,render:function(e){var t=e.field;return Object(F.jsx)(y.a,Object(n.a)(Object(n.a)({},t),{},{isClearable:!1,theme:C.i,isMulti:!0,name:"command",options:se,className:"react-select",classNamePrefix:"select",invalid:ke.command&&!0}))}}),ke.command&&Object(F.jsx)(i.u,{children:ke.command.message})]})]})}),Object(F.jsx)(i.D,{children:te?Object(F.jsxs)(i.f,{variant:"primary",disabled:!0,children:[Object(F.jsx)(i.K,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading..."]}):Object(F.jsx)(i.f,{type:"submit",form:"formFilterCommand",color:"primary",className:"me-1",children:"Submit"})})]}),Object(F.jsxs)(i.B,{scrollable:!0,isOpen:q,toggle:function(){return $(!Z)},className:"modal-dialog-centered",children:[Object(F.jsx)(i.E,{toggle:function(){return A(!q)},children:"Delete User"}),Object(F.jsxs)(i.C,{children:["Are you sure to delete ",I,"?"]}),Object(F.jsx)(i.D,{children:Object(F.jsx)(i.f,{color:"danger",onClick:function(){""!==I&&I&&Fe.post("".concat(C.a,"/user/filtercommand/delete"),{jid:I}).then((function(e){var t=oe.filter((function(e){return e.jid!==I}));de(t),be(t.slice(0,L)),R(""),N.a.success(e.data.message)})).catch((function(){return N.a.error("Failed delete filter command")})),A(!q)},children:"Yes"})})]})]})})})}}}]);
//# sourceMappingURL=16.5e9a8b21.chunk.js.map