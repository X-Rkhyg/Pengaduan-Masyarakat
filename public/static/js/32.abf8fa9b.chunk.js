(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[32],{399:function(e,n,c){"use strict";c.r(n);var r=c(19),a=c(6),t=c(11),i=c(7),o=c(1),l=c(124),s=c(121),d=c(51),j=c(125),b=c(126),m=c(43),u=c(187),O=c(49),f=c(5),x=c(50),h=c.n(x),v=c(123),p=c(52),g=c(10);n.default=function(){var e=Object(O.b)(),n=Object(O.c)((function(e){return e.auth})),c=Object(f.l)(),x=Object(o.useState)(!1),k=Object(i.a)(x,2),F=k[0],N=k[1],y=Object(o.useState)(!0),w=Object(i.a)(y,2),C=w[0],T=w[1],M=Object(o.useState)(""),q=Object(i.a)(M,2),S=q[0],B=q[1],P=j.e().shape({prefix:j.g().required(),prefixMode:j.g().required(),packname:j.g().required(),authorname:j.g().required(),name:j.g().required(),limit:j.d().required().typeError("limit must be a number").max("Basic"===n.user.role?20:100),onlineOnConnect:j.b(),balanceperlimit:j.d().required().typeError("Balanceperlimit must be a number"),footerText:j.g().required(),owner:j.a().of(j.e().shape({name:j.g().required("Owner name is a required field"),number:j.g().required("Owner number is a required field")}))}),A=Object(l.f)({mode:"onChange",resolver:Object(b.a)(P),defaultValues:{prefix:"",prefixMode:"",packname:"",authorname:"",name:"",limit:20,onlineOnConnect:!0,balanceperlimit:100,footerText:"",owner:[{name:"",number:""}]}}),E=A.control,z=A.formState.errors,J=A.handleSubmit,D=A.setValue,L=Object(l.e)({control:E,name:"owner"}),V=L.fields,K=L.remove,G=L.append,H=L.replace,I=s.a.create();I.interceptors.request.use(function(){var c=Object(t.a)(Object(a.a)().mark((function c(r){var t,i,o;return Object(a.a)().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,!(1e3*(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.exp)<Date.now()||""===n.accessToken)&&n.accessToken){c.next=11;break}return c.next=4,s.a.get(v.b.token);case 4:i=c.sent,r.headers.Authorization="Bearer ".concat(i.data.accessToken),o=Object(d.a)(i.data.accessToken),e(Object(p.b)(i.data.accessToken)),e(Object(p.c)(o)),c.next=12;break;case 11:r.headers.Authorization="Bearer ".concat(n.accessToken);case 12:c.next=16;break;case 14:c.prev=14,c.t0=c.catch(0);case 16:return c.prev=16,c.abrupt("return",r);case 19:case"end":return c.stop()}}),c,null,[[0,14,16,19]])})));return function(e){return c.apply(this,arguments)}}(),(function(e){return Promise.reject(e)}));var Q=function(){I.get("".concat(v.a,"/user/config")).then((function(e){var n=e.data.result;D("authorname",n.authorname),D("footerText",n.footerText),D("limit",n.limit),D("onlineOnConnect",n.onlineOnConnect),T(n.onlineOnConnect),D("balanceperlimit",n.balanceperlimit),D("name",n.name),D("packname",n.packname),D("prefix",n.prefix),D("prefixMode",n.prefixMode),B(n.prefixMode),0!==n.owner.length&&H(n.owner)})).catch((function(){}))};Object(o.useEffect)((function(){var r;""===n.accessToken||!n.accessToken||1e3*(null===(r=n.user)||void 0===r?void 0:r.exp)<Date.now()?s.a.get(v.b.token).then((function(n){var c=n.data,r=Object(d.a)(c.accessToken);e(Object(p.b)(c.accessToken)),e(Object(p.c)(r)),Q()})).catch((function(e){console.log(e),c("/auth/login")})):Q()}),[]);return Object(g.jsx)("div",{children:Object(g.jsx)(m.J,{children:Object(g.jsx)(m.o,{children:Object(g.jsx)(m.h,{children:Object(g.jsxs)(m.i,{children:[Object(g.jsx)(m.n,{tag:"h4",className:"mb-1",children:"Config"}),Object(g.jsxs)(m.t,{onSubmit:J((function(e){N(!0),I.post("".concat(v.a,"/user/config"),e).then((function(e){N(!1),h.a.success(e.data.message)})).catch((function(e){var n,c;N(!1),h.a.error(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)}))})),children:[Object(g.jsxs)("div",{className:"mb-1",children:[Object(g.jsxs)(m.y,{className:"form-label",for:"name",children:["Name Bot",Object(g.jsx)("font",{color:"FF7F7F",children:"*"})]}),Object(g.jsx)(l.a,{id:"name",name:"name",control:E,render:function(e){var n=e.field;return Object(g.jsx)(m.v,Object(r.a)(Object(r.a)({},n),{},{placeholder:"Nama bot anda",invalid:z.name&&!0}))}}),z.name&&Object(g.jsx)(m.u,{children:z.name.message})]}),Object(g.jsxs)("div",{className:"mb-1",children:[Object(g.jsxs)(m.y,{className:"form-label",for:"packname",children:["Packname Sticker",Object(g.jsx)("font",{color:"FF7F7F",children:"*"})]}),Object(g.jsx)(l.a,{id:"packname",name:"packname",control:E,render:function(e){var n=e.field;return Object(g.jsx)(m.v,Object(r.a)(Object(r.a)({},n),{},{placeholder:"Packname sticker",invalid:z.packname&&!0}))}}),z.packname&&Object(g.jsx)(m.u,{children:z.packname.message})]}),Object(g.jsxs)("div",{className:"mb-1",children:[Object(g.jsxs)(m.y,{className:"form-label",for:"authorname",children:["Authorname Sticker",Object(g.jsx)("font",{color:"FF7F7F",children:"*"})]}),Object(g.jsx)(l.a,{id:"authorname",name:"authorname",control:E,render:function(e){var n=e.field;return Object(g.jsx)(m.v,Object(r.a)(Object(r.a)({},n),{},{placeholder:"Authorname sticker",invalid:z.authorname&&!0}))}}),z.authorname&&Object(g.jsx)(m.u,{children:z.authorname.message})]}),Object(g.jsxs)("div",{className:"mb-1",children:[Object(g.jsxs)(m.y,{className:"form-label",for:"footerText",children:["FooterText (Only Nitro)",Object(g.jsx)("font",{color:"FF7F7F",children:"*"})]}),Object(g.jsx)(l.a,{id:"footerText",name:"footerText",control:E,render:function(e){var c=e.field;return Object(g.jsx)(m.v,Object(r.a)(Object(r.a)({},c),{},{placeholder:"footerText",invalid:z.footerText&&!0,disabled:"Basic"===n.user.role}))}}),z.footerText&&Object(g.jsx)(m.u,{children:z.footerText.message})]}),Object(g.jsxs)("div",{className:"mb-1",children:[Object(g.jsxs)(m.y,{className:"form-label",for:"limit",children:["Limit",Object(g.jsx)("font",{color:"FF7F7F",children:"*"})]}),Object(g.jsx)(l.a,{id:"limit",name:"limit",control:E,render:function(e){var n=e.field;return Object(g.jsx)(m.v,Object(r.a)(Object(r.a)({},n),{},{placeholder:"20",invalid:z.limit&&!0,type:"number"}))}}),z.limit&&Object(g.jsx)(m.u,{children:z.limit.message})]}),Object(g.jsxs)("div",{className:"mb-1",children:[Object(g.jsxs)(m.y,{className:"form-label",for:"balanceperlimit",children:["Balance/limit",Object(g.jsx)("font",{color:"FF7F7F",children:"*"})]}),Object(g.jsx)(l.a,{id:"balanceperlimit",name:"balanceperlimit",control:E,render:function(e){var n=e.field;return Object(g.jsx)(m.v,Object(r.a)(Object(r.a)({},n),{},{placeholder:"100",invalid:z.balanceperlimit&&!0,type:"number"}))}}),z.balanceperlimit&&Object(g.jsx)(m.u,{children:z.balanceperlimit.message})]}),Object(g.jsxs)("div",{className:"mb-1",children:[V.map((function(e,n){var c,a,t,i,o,s,d,j;return Object(g.jsxs)(m.J,{className:"mb-2",children:[Object(g.jsxs)(m.o,{sm:"5",children:[Object(g.jsxs)(m.y,{className:"form-label",children:["Owner Name",Object(g.jsx)("font",{color:"FF7F7F",children:"*"})]}),Object(g.jsx)(l.a,{name:"owner.".concat(n,".name"),control:E,render:function(e){var c,a,t=e.field;return Object(g.jsx)(m.v,Object(r.a)(Object(r.a)({},t),{},{invalid:(null===z||void 0===z||null===(c=z.owner)||void 0===c||null===(a=c[n])||void 0===a?void 0:a.name)&&!0}))}}),(null===z||void 0===z||null===(c=z.owner)||void 0===c||null===(a=c[n])||void 0===a?void 0:a.name)&&Object(g.jsx)(m.u,{children:null===z||void 0===z||null===(t=z.owner)||void 0===t||null===(i=t[n])||void 0===i?void 0:i.name.message})]}),Object(g.jsxs)(m.o,{sm:"5",children:[Object(g.jsxs)(m.y,{className:"form-label",children:["Owner Number",Object(g.jsx)("font",{color:"FF7F7F",children:"*"})]}),Object(g.jsx)(l.a,{name:"owner.".concat(n,".number"),control:E,render:function(e){var c,a,t=e.field;return Object(g.jsx)(m.v,Object(r.a)(Object(r.a)({},t),{},{invalid:(null===z||void 0===z||null===(c=z.owner)||void 0===c||null===(a=c[n])||void 0===a?void 0:a.number)&&!0}))}}),(null===z||void 0===z||null===(o=z.owner)||void 0===o||null===(s=o[n])||void 0===s?void 0:s.number)&&Object(g.jsx)(m.u,{children:null===z||void 0===z||null===(d=z.owner)||void 0===d||null===(j=d[n])||void 0===j?void 0:j.number.message})]}),Object(g.jsx)(m.o,{sm:"2",className:"mt-2",children:Object(g.jsx)(m.f,{color:"danger",outline:!0,onClick:function(){V.length>1&&K(n)},className:"text-nowrap px-1",children:Object(g.jsx)(u.a,{size:14})})})]},e.id)})),V.length<5&&"Basic"!==n.user.role&&Object(g.jsx)("div",{className:"text-end",children:Object(g.jsx)(m.f,{color:"primary",outline:!0,onClick:function(){return G({name:"",number:""})},children:"Add Owner"})})]}),Object(g.jsxs)("div",{className:"mb-1",children:[Object(g.jsxs)(m.y,{className:"form-label",for:"prefix",children:["Prefix",Object(g.jsx)("font",{color:"FF7F7F",children:"*"})]}),Object(g.jsx)(l.a,{id:"prefix",name:"prefix",control:E,render:function(e){var n=e.field;return Object(g.jsx)(m.v,Object(r.a)(Object(r.a)({},n),{},{placeholder:"#",invalid:z.prefix&&!0}))}}),z.prefix&&Object(g.jsx)(m.u,{children:z.prefix.message})]}),Object(g.jsxs)("div",{className:"form-check mb-1",children:[Object(g.jsx)(m.y,{className:"form-check-label",for:"prefix",children:"Multi Prefix"}),Object(g.jsx)(l.a,{id:"prefixModeMulti",name:"prefixMode",control:E,render:function(e){var n=e.field;return Object(g.jsx)(m.v,Object(r.a)(Object(r.a)({},n),{},{value:"multi",type:"radio",checked:"multi"===S,onChange:function(e){var c;null!==e&&void 0!==e&&null!==(c=e.target)&&void 0!==c&&c.checked&&B("multi"),n.onChange(e)}}))}})]}),Object(g.jsxs)("div",{className:"form-check mb-1",children:[Object(g.jsx)(m.y,{className:"form-check-label",for:"prefix",children:"Single Prefix"}),Object(g.jsx)(l.a,{id:"prefixModeSingle",name:"prefixMode",control:E,render:function(e){var n=e.field;return Object(g.jsx)(m.v,Object(r.a)(Object(r.a)({},n),{},{value:"single",type:"radio",checked:"single"===S,onChange:function(e){var c;null!==e&&void 0!==e&&null!==(c=e.target)&&void 0!==c&&c.checked&&B("single"),n.onChange(e)}}))}})]}),Object(g.jsxs)("div",{className:"form-check mb-1",children:[Object(g.jsx)(m.y,{className:"form-check-label",for:"prefix",children:"Empty Prefix"}),Object(g.jsx)(l.a,{id:"prefixModeEmpty",name:"prefixMode",control:E,render:function(e){var n=e.field;return Object(g.jsx)(m.v,Object(r.a)(Object(r.a)({},n),{},{value:"empty",type:"radio",checked:"empty"===S,onChange:function(e){var c;null!==e&&void 0!==e&&null!==(c=e.target)&&void 0!==c&&c.checked&&B("empty"),n.onChange(e)}}))}})]}),z.prefixMode&&Object(g.jsx)(m.u,{children:z.prefixMode.message}),Object(g.jsxs)("div",{className:"form-check mb-1",children:[Object(g.jsx)(l.a,{id:"onlineOnConnect",name:"onlineOnConnect",control:E,render:function(e){var n=e.field;return Object(g.jsx)(m.v,Object(r.a)(Object(r.a)({},n),{},{type:"checkbox",invalid:z.onlineOnConnect&&!0,checked:C,onChange:function(e){var c;T(!(null===e||void 0===e||null===(c=e.target)||void 0===c||!c.checked)),n.onChange(e)}}))}}),Object(g.jsx)(m.y,{for:"onlineOnConnect",className:"form-check-label",children:"Online On Connect"}),z.onlineOnConnect&&Object(g.jsx)(m.u,{children:z.onlineOnConnect.message})]}),F?Object(g.jsxs)(m.f,{variant:"primary",disabled:!0,children:[Object(g.jsx)(m.K,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading..."]}):Object(g.jsx)(m.f,{type:"submit",color:"primary",className:"me-1",children:"Submit"}),Object(g.jsx)("div",{className:"text-end",children:Object(g.jsxs)("small",{children:[Object(g.jsx)("font",{color:"FF7F7F",children:"*"})," required fields"]})})]})]})})})})})}}}]);